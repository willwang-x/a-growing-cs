# RSA：现代网络安全的基石

![RSA](https://i.imgur.com/V0WiFoO.png)

## 起源

和 M 讨论RSA，说是RSA是现在网络安全的基石，恰好这学期的老师是 A，然后就想顺便搞明白这个RSA算法。


## 重新设计

我们做一个思想实验，从最原始的「对称加密」开始讨论，分析其问题，然后得到新的解决方案，一个一个方案递进，然后最后推导到我们现在使用的**网****络安全传输的方案**。

### 1.对称加密

具体方案是双方都拿一个「密码本」，然后根据「密码本」来加密解密。

问题是，在没有「密码本」时，如何把「密码本」安全传给对方呢？

中间可能会被劫走。

### 2. 非对称加密 RSA 

我们想要发明一种算法，「加密算法」和「加密算法」可以不依赖同一本密码本。

举个例子，我们有两个人物，小明和小黑，小黑通过「加密算法」发送消息给小明，小明通过「解密算法」来给这个解密。我们希望「加密算法」公开的，加完密的消息，没有「解密算法」是无法解开。这样，小明想到得到的消息是加密的，且只有可以解密，那么只要把「解密算法」私有，「加密算法」公开即可。

这个算法，就是「**RSA**」。

效果是，问题1中「密码本」就不存在安全传输的问题了，因为「加密算法」的密码本是公开的。

那有了新**问题**，小黑如何知道是**真正**的小明，给他发的「加密算法」呢？如果是假的，那小黑的消息也会被发给坏人 —— 假的小明。

### 3. 数字签名 

现在我们需要认证身份的方式，就像**身份证**一样，上面有你的照片和身份证号，我看一下你的身份证，然后到「认证」的公安局查一下身份号，一看照片**一样**，就确认你是真的。

举个例子，浏览器访问网站「bank.com」, 然后「bank.com」提供了一个「证书」—— 网站名 + 一段被加密过的信息。然后我们的浏览器出厂时就保存了认证的「解密算法」，然后我们通过「解密算法」解密信息，得到的网站名是一样的，我们就确认了网站是真的。因为「解密算法」和「加密算法」是配对的。这个「解密算法」复原的消息，是无法通过其他「加密算法」来加密得到「证书」现实消息。

这个「证书」，就是数字签名。

效果是，我们解决了身份认证的问题了。只要我对每一个服务器都进行「身份认证」就可以了。

但是实际的问题是，太费钱费时，因为世界那么多服务器，一个银行，就对应那么多人的客户。

### 4. 非对称加密 + 对称加密

我们可以利用各自的优点，我们需要对银行进行认证，然后客户用RSA算法，让银行提供一个公开的「加密算法」，然后客户给银行，发一个「密码本」，然后之后就用「密码本」进行加密解密交流就可以了。

效果是，银行和客户的交流渠道就建立起来的。

新的问题来了，「坏了」读不懂内容，但是可以篡改内容，或许被「解密算法」解密之后还是有意义的信息。


### 5. 数据完整性 

所以，我们需要一种确认数据完整性的方式。

方案就是，给一个信息加一个「指纹」，这个「指纹」由「加密算法」加密「信息」得到。这样，整个信息就变了「原文」+ 「指纹」。 对方收到「消息」之后，用自己的「私钥」解密之后，再用公共的「加密算法」对「原文」加密得到一个「指纹」，然后对比两者，看看是否是一样。

效果是，我们就可以确认信息是否完整了。

## Reference 

* [数字证书原理](http://www.cnblogs.com/JeffreySun/archive/2010/06/24/1627247.html) : 详细阐述了相关的原理
